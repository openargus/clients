<?xml version='1.0' encoding='windows-1252'?>
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi'>
  <Product Name='ArgusPro Clients @PACKAGE_VERSION@'
  Id='0002f85d-6809-4708-9443-c588d98e65cb'
  UpgradeCode='6dadd131-fcf4-4e19-bec2-fbcb78c0f0c0'
  Language='1033' Codepage='1252'
  Version='@PACKAGE_VERSION@.@PACKAGE_RELEASE@'
  Manufacturer='QoSient LLC'>
    <Package Id='*' Keywords='Installer'
    Description="QoSient ArgusPro Clients @PACKAGE_VERSION@ Installer"
    Manufacturer='QoSient LLC' InstallerVersion='100'
    Languages='1033' Compressed='yes' SummaryCodepage='1252' />
    <Media Id='1' Cabinet='Sample.cab' EmbedCab='yes'
    DiskPrompt="CD-ROM #1" />

    <Upgrade Id='f86c9c25-613b-479e-afcc-4b677cc0e9cb'>
      <UpgradeVersion OnlyDetect='no' Property='PREVIOUSFOUND'
        Minimum='1.0.0' IncludeMinimum='yes'
        Maximum='@PACKAGE_VERSION@.@PACKAGE_RELEASE@'
        IncludeMaximum='yes' />
    </Upgrade>


    <Property Id='DiskPrompt' Value="Argus Clients Installation [1]" />
    <Directory Id='TARGETDIR' Name='SourceDir'>
      <Component Id="REG_MACHINE" Guid="*">
        <RegistryKey Id="srvc1" Root="HKLM"
        Key="SYSTEM\CurrentControlSet\Services\QoSient:Rasplit\Parameters"
        Action="create">
          <RegistryValue Type="expandable" Name="AppPath"
          Value="/bin/rasplit.exe" />
          <RegistryValue Type="string" Name="AppArgs"
          Value='-S localhost:562 -M time 5m -w /argus/$srcid/%Y/%m/%d/argus.%Y.%m.%d.%H.%M.%S'/>
          <RegistryValue Type="integer" Name="NeverExits"
          Value="1" />
        </RegistryKey>
      </Component>
      <Directory Id='ProgramFilesFolder' Name='PFiles'>
        <Directory Id='ArgusClientsTopDir' Name='ArgusClients'>
          <Directory Id='argus' Name='argus'/>
          <Directory Id='etc' Name='etc'>
            <Component Id='Config' Guid="*">
              <File Id='ra.conf' Name='ra.conf' DiskId='1'
              Source="etc/rarc"
              KeyPath='yes'></File>
            </Component>
          </Directory>
          <Directory Id='INSTALLDIR' Name='bin'>
            <Component Id='ra.exe' Guid="*">
              <File Id='ra.exe' Name='ra.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/ra.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='rabins.exe' Guid="*">
              <File Id='rabins.exe' Name='rabins.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/rabins.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='racluster.exe' Guid="*">
              <File Id='racluster.exe' Name='racluster.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/racluster.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='racount.exe' Guid="*">
              <File Id='racount.exe' Name='racount.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/racount.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='radium.exe' Guid="*">
              <File Id='radium.exe' Name='radium.exe' DiskId='1'
              Source="BUILDROOT/usr/sbin/radium.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='ranonymize.exe' Guid="*">
              <File Id='ranonymize.exe' Name='ranonymize.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/ranonymize.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='rasort.exe' Guid="*">
              <File Id='rasort.exe' Name='rasort.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/rasort.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='rasplit.exe' Guid="*">
              <File Id='rasplit.exe' Name='rasplit.exe' DiskId='1'
              Source="BUILDROOT/usr/bin/rasplit.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id='dash.exe' Guid="*">
              <File Id='dash.exe' Name='sh.exe' DiskId='1'
              Source="c:\cygwin\bin\dash.exe" KeyPath='yes'>
              </File>
            </Component>
            <Component Id="cygrunsrv.exe" Guid="*">
              <File Id="cygrunsrv.exe"
              Source="c:\cygwin\bin\cygrunsrv.exe"
              Name="cygrunsrv.exe" KeyPath="yes" Checksum="yes" />
              <ServiceInstall Id="cygrunsrv.exe" Type="ownProcess"
              Vital="yes" Name="QoSient:RaSplit"
              DisplayName="QoSient:RaSplit"
              Description="QoSient Argus Clients Version @PACKAGE_VERSION@"
              Start="auto" Account="LocalSystem"
              ErrorControl="ignore" Interactive="no" />
              <ServiceControl Id="cygrunsrv.exe" Start="install"
              Stop="both" Remove="uninstall" Name="QoSient:RaSplit"
              Wait="no" />
            </Component>
            <Component Id='LibGCC' Guid="*">
              <File Id='LibGCC' Name='cyggcc_s-1.dll' DiskId='1'
              Source='C:\Cygwin\bin\cyggcc_s-1.dll' KeyPath='yes'>
              </File>
            </Component>
            <Component Id='LibCygwin1' Guid="*">
              <File Id='LibCygwin1' Name='cygwin1.dll' DiskId='1'
              Source='C:\Cygwin\bin\cygwin1.dll' KeyPath='yes'>
              </File>
            </Component>
            <Component Id='LibCygz' Guid="*">
              <File Id='LibCygz' Name='cygz.dll' DiskId='1'
              Source='C:\Cygwin\bin\cygz.dll' KeyPath='yes'></File>
            </Component>
            <Component Id='LibSasl2' Guid="*">
              <File Id='LibSasl2' Name='cygsasl2-3.dll' DiskId='1'
              Source='C:\Cygwin\bin\cygsasl2-3.dll' KeyPath='yes'></File>
            </Component>
          </Directory>
        </Directory>
      </Directory>
      <Directory Id="ProgramMenuFolder" Name="Programs">
        <Directory Id="ProgramMenuDir"
        Name="Argus @PACKAGE_VERSION@">
          <Component Id="ProgramMenuDir" Guid="*">
            <RemoveFolder Id='ProgramMenuDir' On='uninstall' />
            <RegistryValue Root='HKCU'
            Key='Software\[Manufacturer]\[ProductName]'
            Type='string' Value='' KeyPath='yes' />
          </Component>
        </Directory>
      </Directory>
      <Directory Id="DesktopFolder" Name="Desktop" />
    </Directory>
    <Feature Id='Complete' Level='1'>
      <ComponentRef Id='ra.exe' />
      <ComponentRef Id='rabins.exe' />
      <ComponentRef Id='rasplit.exe' />
      <ComponentRef Id='racluster.exe' />
      <ComponentRef Id='radium.exe' />
      <ComponentRef Id='ranonymize.exe' />
      <ComponentRef Id='rasort.exe' />
      <ComponentRef Id='racount.exe' />
      <ComponentRef Id='dash.exe' />
      <ComponentRef Id='LibGCC' />
      <ComponentRef Id='LibCygwin1' />
      <ComponentRef Id='LibCygz' />
      <ComponentRef Id='LibSasl2' />
      <ComponentRef Id='ProgramMenuDir' />
      <ComponentRef Id='Config' />
      <ComponentRef Id='cygrunsrv.exe' />
      <ComponentRef Id='REG_MACHINE' />
    </Feature>

    <InstallExecuteSequence>
      <RemoveExistingProducts After="InstallInitialize" />
    </InstallExecuteSequence>

  </Product>
</Wix>
